<?xml version="1.0" encoding="utf-8"?>
<root>
	<xmlns:xsd>http://www.w3.org/2001/XMLSchema</xmlns:xsd>
	<xmlns:xsi>http://www.w3.org/2001/XMLSchema-instance</xmlns:xsi>
	<xsi:schemaLocation>WoT.AI/BTree server_xml/ai/schemas/behaviortree/vehiclebot_bthost.xsd</xsi:schemaLocation>
	<xmlns>WoT.AI/BTree</xmlns>
	<Tree>
		<rootType>Sequence</rootType>
		<host>vehiclebot_bthost</host>
		<Node>
			<xsi:type>DecoratorRunning</xsi:type>
			<name>Moving</name>
			<Node>
				<xsi:type>Sequence</xsi:type>
				<Node>
					<xsi:type>DecoratorNot</xsi:type>
					<name>Move, stop and move again</name>
					<Node>
						<xsi:type>Sequence</xsi:type>
						<Node>
							<xsi:type>Leaf</xsi:type>
							<function>move</function>
							<param>FollowRoute</param>
						</Node>
						<Node>
							<xsi:type>DecoratorRunning</xsi:type>
							<name>conditions to stop</name>
							<Node>
								<xsi:type>Selector</xsi:type>
								<name>route end reached or player too far behind or can shoot</name>
								<Node>
									<xsi:type>Leaf</xsi:type>
									<function>isTargetReached</function>
									<param/>
								</Node>
								<Node>
									<xsi:type>DecoratorNot</xsi:type>
									<name>player too far behind</name>
									<Node>
										<xsi:type>Leaf</xsi:type>
										<function>isVehicleAhead</function>
										<param>Player40MetersBehind</param>
									</Node>
								</Node>
							</Node>
						</Node>
						<Node>
							<xsi:type>DecoratorNot</xsi:type>
							<name>target not reached</name>
							<Node>
								<xsi:type>Leaf</xsi:type>
								<function>isTargetReached</function>
								<param/>
							</Node>
						</Node>
						<Node>
							<xsi:type>Leaf</xsi:type>
							<function>stopMovement</function>
						</Node>
						<Node>
							<xsi:type>DecoratorRunning</xsi:type>
							<name>conditions move again</name>
							<Node>
								<xsi:type>Leaf</xsi:type>
								<function>isVehicleAhead</function>
								<param>Player20MetersBehind</param>
							</Node>
						</Node>
					</Node>
				</Node>
				<Node>
					<xsi:type>DecoratorNot</xsi:type>
					<name>Movement doesnt fail</name>
					<Node>
						<xsi:type>Leaf</xsi:type>
						<function>isMovementFailed</function>
					</Node>
				</Node>
			</Node>
		</Node>
	</Tree>
	<Parameter>
		<xsi:type>RouteMoveParam</xsi:type>
		<id>FollowRoute</id>
		<positionType>
			<value>RoleTarget</value>
		</positionType>
		<arriveDistance>
			<value>2</value>
		</arriveDistance>
		<loop>
			<value>false</value>
		</loop>
		<reset>
			<value>false</value>
		</reset>
		<optionsMask>
			<value>Normal</value>
		</optionsMask>
		<useMovementLimitsForPathfinding>
			<value>false</value>
		</useMovementLimitsForPathfinding>
	</Parameter>
	<Parameter>
		<xsi:type>VehicleAheadParam</xsi:type>
		<id>Player40MetersBehind</id>
		<aheadDist>
			<value>-40</value>
		</aheadDist>
		<vehicle>
			<value>Player</value>
		</vehicle>
	</Parameter>
	<Parameter>
		<xsi:type>VehicleAheadParam</xsi:type>
		<id>Player20MetersBehind</id>
		<aheadDist>
			<value>-20</value>
		</aheadDist>
		<vehicle>
			<value>Player</value>
		</vehicle>
	</Parameter>
</root>
